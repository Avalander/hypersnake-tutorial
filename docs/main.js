!function(n){var t={};function e(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return n[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=n,e.c=t,e.d=function(n,t,r){e.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:r})},e.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,t){if(1&t&&(n=e(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var o in n)e.d(r,o,function(t){return n[t]}.bind(null,o));return r},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},e.p="",e(e.s=1)}([function(n,t,e){"use strict";function r(n,t){for(var e=[],r=[],o=arguments.length;o-- >2;)e.push(arguments[o]);for(;e.length;){var i=e.pop();if(i&&i.pop)for(o=i.length;o--;)e.push(i[o]);else null!=i&&!0!==i&&!1!==i&&r.push(i)}return"function"==typeof n?n(t||{},r):{nodeName:n,attributes:t||{},children:r,key:t&&t.key}}function o(n,t,e,r){var o,i=[].map,u=r&&r.children[0]||null,c=u&&function n(t){return{nodeName:t.nodeName.toLowerCase(),attributes:{},children:i.call(t.childNodes,function(t){return 3===t.nodeType?t.nodeValue:n(t)})}}(u),a=[],f=!0,l=y(n),s=function n(t,e,r){for(var o in r)"function"==typeof r[o]?function(n,o){r[n]=function(n){var i=o(n);return"function"==typeof i&&(i=i(g(t,l),r)),i&&i!==(e=g(t,l))&&!i.then&&h(l=v(t,y(e,i),l)),i}}(o,r[o]):n(t.concat(o),e[o]=y(e[o]),r[o]=y(r[o]));return r}([],l,y(t));return h(),s;function d(n){return"function"==typeof n?d(n(l,s)):null!=n?n:""}function p(){o=!o;var n=d(e);for(r&&!o&&(u=function n(t,e,r,o,i){if(o===r);else if(null==r||r.nodeName!==o.nodeName){var u=function n(t,e){var r="string"==typeof t||"number"==typeof t?document.createTextNode(t):(e=e||"svg"===t.nodeName)?document.createElementNS("http://www.w3.org/2000/svg",t.nodeName):document.createElement(t.nodeName);var o=t.attributes;if(o){o.oncreate&&a.push(function(){o.oncreate(r)});for(var i=0;i<t.children.length;i++)r.appendChild(n(t.children[i]=d(t.children[i]),e));for(var u in o)k(r,u,o[u],null,e)}return r}(o,i);t.insertBefore(u,e),null!=r&&b(t,e,r),e=u}else if(null==r.nodeName)e.nodeValue=o;else{!function(n,t,e,r){for(var o in y(t,e))e[o]!==("value"===o||"checked"===o?n[o]:t[o])&&k(n,o,e[o],t[o],r);var i=f?e.oncreate:e.onupdate;i&&a.push(function(){i(n,t)})}(e,r.attributes,o.attributes,i=i||"svg"===o.nodeName);for(var c={},l={},s=[],p=r.children,h=o.children,v=0;v<p.length;v++){s[v]=e.childNodes[v];var g=m(p[v]);null!=g&&(c[g]=[s[v],p[v]])}for(var v=0,x=0;x<h.length;){var g=m(p[v]),w=m(h[x]=d(h[x]));if(l[g])v++;else if(null==w||w!==m(p[v+1]))if(null==w||f)null==g&&(n(e,s[v],p[v],h[x],i),x++),v++;else{var _=c[w]||[];g===w?(n(e,_[0],_[1],h[x],i),v++):_[0]?n(e,e.insertBefore(_[0],s[v]),_[1],h[x],i):n(e,s[v],null,h[x],i),l[w]=h[x],x++}else null==g&&b(e,s[v],p[v]),v++}for(;v<p.length;)null==m(p[v])&&b(e,s[v],p[v]),v++;for(var v in c)l[v]||b(e,c[v][0],c[v][1])}return e}(r,u,c,c=n)),f=!1;a.length;)a.pop()()}function h(){o||(o=!0,setTimeout(p))}function y(n,t){var e={};for(var r in n)e[r]=n[r];for(var r in t)e[r]=t[r];return e}function v(n,t,e){var r={};return n.length?(r[n[0]]=n.length>1?v(n.slice(1),t,e[n[0]]):t,y(e,r)):t}function g(n,t){for(var e=0;e<n.length;)t=t[n[e++]];return t}function m(n){return n?n.key:null}function x(n){return n.currentTarget.events[n.type](n)}function k(n,t,e,r,o){if("key"===t);else if("style"===t)for(var i in y(r,e)){var u=null==e||null==e[i]?"":e[i];"-"===i[0]?n[t].setProperty(i,u):n[t][i]=u}else"o"===t[0]&&"n"===t[1]?(t=t.slice(2),n.events?r||(r=n.events[t]):n.events={},n.events[t]=e,e?r||n.addEventListener(t,x):n.removeEventListener(t,x)):t in n&&"list"!==t&&"type"!==t&&"draggable"!==t&&"spellcheck"!==t&&"translate"!==t&&!o?n[t]=null==e?"":e:null!=e&&!1!==e&&n.setAttribute(t,e),null!=e&&!1!==e||n.removeAttribute(t)}function b(n,t,e){function r(){n.removeChild(function n(t,e){var r=e.attributes;if(r){for(var o=0;o<e.children.length;o++)n(t.childNodes[o],e.children[o]);r.ondestroy&&r.ondestroy(t)}return t}(t,e))}var o=e.attributes&&e.attributes.onremove;o?o(t,r):r()}}e.r(t),e.d(t,"h",function(){return r}),e.d(t,"app",function(){return o})},function(n,t,e){"use strict";var r=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},o=e(0),i=e(3),u=e(2);const c="#088c64",a={fill:"#bcaba0",stroke:"#706660"},f={fill:"#ff5a5f",stroke:"#b23e42"},l={left:{x:-1,y:0},right:{x:1,y:0},up:{x:0,y:-1},down:{x:0,y:1}},s={ArrowUp:()=>(0,i.action)("changeDirection","up"),ArrowDown:()=>(0,i.action)("changeDirection","down"),ArrowLeft:()=>(0,i.action)("changeDirection","left"),ArrowRight:()=>(0,i.action)("changeDirection","right"),r:()=>(0,i.action)("restartIfOver")},d={up:"down",down:"up",left:"right",right:"left"},p=[0,5,5,10,10,10,10,10,10,20,20,30],h=(n,t)=>Math.floor(Math.random()*(t-n)+n),y=()=>({x:15*h(0,40),y:15*h(0,27)}),v=(n,t)=>n.some(n=>k(t,n))?v(n,y()):t,g=n=>r({},n,{score:(n=>n[h(0,n.length)])(p)}),m={snake:[{x:45,y:45},{x:30,y:45},{x:15,y:45}],direction:"right",next_direction:"right",apple:{x:300,y:60,score:10},score:0,is_running:!0,update_interval:150},x={start:()=>[(0,i.keydown)("keyPressed"),(0,i.action)("frame")],frame:()=>[(0,i.action)("updateDirection"),(0,i.action)("updateSnake"),(0,i.action)("checkEatApple"),(0,i.action)("continue")],continue:()=>n=>b(n.snake[0])||w(n.snake)?(0,i.action)("updateIsRunning",!1):(0,i.delay)(n.update_interval,"frame"),restartIfOver:()=>n=>n.is_running?[]:[(0,i.action)("reset"),(0,i.action)("frame")],reset:()=>n=>({snake:[{x:45,y:45},{x:30,y:45},{x:15,y:45}],direction:"right",next_direction:"right",apple:{x:300,y:60,score:10},score:0,is_running:!0,update_interval:150}),updateSnake:()=>n=>r({},n,{snake:_(n.snake,n.direction)}),updateDirection:()=>n=>r({},n,{direction:n.next_direction}),checkEatApple:()=>n=>k(n.snake[0],n.apple)?[(0,i.action)("eatApple"),(0,i.action)("relocateApple"),(0,i.action)("updateScore",n.apple.score),(0,i.action)("updateSpeed",n.score)]:[],eatApple:()=>n=>r({},n,{snake:O(n.snake)}),relocateApple:()=>n=>r({},n,{apple:(n=>g(v(n,y())))(n.snake)}),updateScore:n=>t=>r({},t,{score:t.score+n}),updateSpeed:n=>t=>r({},t,{update_interval:Math.floor(t.score/100)>Math.floor(n/100)?((n,t)=>n>t?n:t)(50,t.update_interval-10):t.update_interval}),updateIsRunning:n=>t=>r({},t,{is_running:n}),keyPressed:({key:n})=>Object.keys(s).includes(n)?s[n]():[],changeDirection:n=>t=>r({},t,{next_direction:n===d[t.direction]?t.next_direction:n})},k=(n,t)=>n.x===t.x&&n.y===t.y,b=({x:n,y:t})=>n<0||n>=600||t<0||t>=405,w=([n,...t])=>t.some(t=>k(n,t)),_=(n,t)=>{const[e]=n,r=n.pop();return r.x=e.x+15*l[t].x,r.y=e.y+15*l[t].y,n.unshift(r),n},O=n=>[...n,{x:n[n.length-1].x,y:n[n.length-1].y}],j=()=>(0,u.g)({key:"background"},[(0,u.rect)({x:0,y:0,width:600,height:405,fill:c})]),A=n=>(0,u.g)({key:"snake"},n.map(({x:n,y:t})=>(0,u.rect)({x:n,y:t,width:15,height:15,fill:a.fill,stroke:a.stroke,"stroke-width":2}))),N=({x:n,y:t})=>(0,u.g)({key:"apple"},[(0,u.rect)({x:n,y:t,width:15,height:15,fill:f.fill,stroke:f.stroke,"stroke-width":2})]),S={font:"bold 20px sans-seriff",fill:"#fff",opacity:.8},P=n=>(0,u.g)({key:"score"},[(0,u.text)({style:S,x:5,y:20},`Score: ${n}`)]),M={title:{font:"bold 48px sans-seriff",fill:"#fff",opacity:.8,"text-anchor":"middle"},text:{font:"30px sans-seriff",fill:"#fff",opacity:.8,"text-anchor":"middle"}},T=n=>(0,u.g)({key:"game-over"},[(0,u.rect)({x:0,y:0,width:600,height:405,fill:"#000",opacity:.4}),(0,u.text)({style:M.title,x:300,y:100},"Game Over"),(0,u.text)({style:M.text,x:300,y:160},`Score: ${n}`),(0,u.text)({style:M.text,x:300,y:200},"Press 'R' to restart")]);(0,i.withFx)(o.app)(m,x,n=>(0,u.svg)({viewBox:"0 0 600 405",width:600,height:405},[j(),N(n.apple),A(n.snake),n.is_running?P(n.score):T(n.score)]),document.body).start()},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.text=t.rect=t.g=t.svg=void 0;var r=e(0);t.svg=((n,t)=>(0,r.h)("svg",n,t)),t.g=((n,t)=>(0,r.h)("g",n,t)),t.rect=((n,t)=>(0,r.h)("rect",n,t)),t.text=((n,t)=>(0,r.h)("text",n,t))},function(n,t,e){"use strict";function r(n,t){var e,r={};for(e in n)r[e]=n[e];for(e in t)r[e]=t[e];return r}e.r(t);var o="action",i="frame",u="delay",c="time",a="log",f="http",l="event",s="keydown",d="keyup",p="random",h="debounce",y="throttle";function v(){var n={};n[o]=function(n,t){t(n.name)(n.data)},n[i]=function(n,t){requestAnimationFrame(function(e){t(n.action)(e)})},n[u]=function(n,t){setTimeout(function(){t(n.action)(n.data)},n.duration)},n[c]=function(n,t){t(n.action)(performance.now())},n[a]=function(n){console.log.apply(null,n.args)},n[f]=function(n,t){var e=r({response:"json",error:n.action},n.options),o=function(n,t){var e={};return Object.keys(n).filter(function(n){return-1===t.indexOf(n)}).forEach(function(t){e[t]=n[t]}),e}(e,["response","error"]);fetch(n.url,o).then(function(n){if(!n.ok)throw n;return n}).then(function(n){return n[e.response]()}).then(function(e){t(n.action)(e)}).catch(function(n){t(e.error)(n)})},n[l]=function(n,t){t(n.action)(n.event)},n[s]=function(n,t){document.onkeydown=function(e){t(n.action)(e)}},n[d]=function(n,t){document.onkeyup=function(e){t(n.action)(e)}},n[p]=function(n,t){var e=Math.random()*(n.max-n.min)+n.min;t(n.action)(e)};var t={};n[h]=function(n,e){return function(n,e){clearTimeout(t[n.action]),t[n.action]=setTimeout(function(){e(n.action)(n.data)},n.wait)}(n,e)};var e={};return n[y]=function(n,t){return function(n,t){e[n.action]||(t(n.action)(n.data),e[n.action]=!0,setTimeout(function(){e[n.action]=!1},n.rate))}(n,t)},n}var g=Array.isArray,m=function(n){return"function"==typeof n};function x(n,t,e,o){if(!g(e))return e;if(g(e[0]))for(var i in e)x(n,t,e[i],o);else if(e.length){var u=function(n,t){return function n(e,r){var o=e[r[0]];if(!o)throw new Error("couldn't find action: "+t);return 1===r.length?o:n(o,r.slice(1))}(n,t.split("."))}.bind(null,n),c=e[0],a=r(e[1],{event:t}),f=o[c];if(!m(f))throw new Error("no such fx type: "+c);f(a,u)}}function k(n,t,e){return function(r){x(n,r,t,e)}}function b(n,t){return function(e,r){var o=n(e,r);return function n(e,r){if("object"==typeof r){for(var o in r.attributes){var i=r.attributes[o];g(i)&&(r.attributes[o]=k(e,i,t))}for(var u in r.children)m(r.children[u])?r.children[u]=b(r.children[u],t):n(e,r.children[u])}}(r,o),o}}function w(n,t){return function(e,r,o,i){var u=function n(t,e){return Object.keys(t||{}).reduce(function(r,o){var i=t[o];return r[o]=m(i)?function(n){return function(t,r){var o=i(n);return x(r,null,o=m(o)?o(t,r):o,e)}}:n(i,e),r},{})}(r,n),c=b(o,n);return t(e,u,c,i)}}function _(n){var t=v();if("function"==typeof n)return w(t,n);for(var e in n)t[e]=n[e];return function(n){return w(t,n)}}function O(n,t){return[o,{name:n,data:t}]}function j(n){return[i,{action:n}]}function A(n,t,e){return[u,{duration:n,action:t,data:e}]}function N(n){return[c,{action:n}]}function S(){return[a,{args:arguments}]}function P(n,t,e){return[f,{url:n,action:t,options:e}]}function M(n){return[l,{action:n}]}function T(n){return[s,{action:n}]}function E(n){return[d,{action:n}]}function D(n,t,e){return[p,{action:n,min:t||0,max:e||1}]}function I(n,t,e){return[h,{wait:n,action:t,data:e}]}function L(n,t,e){return[y,{rate:n,action:t,data:e}]}function R(n){return n.filter(function(n){return n[0]}).map(function(n){return n[1]})}e.d(t,"withFx",function(){return _}),e.d(t,"action",function(){return O}),e.d(t,"frame",function(){return j}),e.d(t,"delay",function(){return A}),e.d(t,"time",function(){return N}),e.d(t,"log",function(){return S}),e.d(t,"http",function(){return P}),e.d(t,"event",function(){return M}),e.d(t,"keydown",function(){return T}),e.d(t,"keyup",function(){return E}),e.d(t,"random",function(){return D}),e.d(t,"debounce",function(){return I}),e.d(t,"throttle",function(){return L}),e.d(t,"fxIf",function(){return R})}]);